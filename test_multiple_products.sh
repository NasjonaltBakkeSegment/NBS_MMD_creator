#!/bin/bash

# Path to the YAML file
YAML_FILE="global_attributes.yaml"

# List of Sentinel product names
PRODUCTS=(
    "S1A_EW_GRDH_1SDH_20240708T051739_20240708T051925_054665_06A7A6_1A0C" # Not found on CDSE
    "S1A_EW_GRDM_1SDH_20250110T110542_20250110T110645_057381_071008_9B3B" #
    "S1A_IW_GRDH_1SDV_20250110T095215_20250110T095236_057380_071001_9E3E" #
    "S1A_IW_GRDM_1SDV_20250109T164950_20250109T165014_057370_070F99_B661" # Not found on CDSE
    "S1B_IW_GRDM_1SDV_20211105T162221_20211105T162251_029455_0383E1_B57D" # Not found on CDSE
    "S1B_IW_GRDH_1SDV_20211223T050405_20211223T050425_030148_039991_8601" #
    "S1B_EW_GRDM_1SDH_20170130T050513_20170130T050613_004073_0070A9_0BB9" #
    "S1B_EW_GRDH_1SDH_20201223T175319_20201223T175526_024833_02F459_D85E" # Not found on CDSE
    "S2A_MSIL1C_20240711T123701_N0510_R095_T31XFG_20240711T161946" #
    "S2A_MSIL2A_20250101T104441_N0511_R008_T32VMK_20250101T132652" #
    "S2B_MSIL1C_20250109T105329_N0511_R051_T33VUJ_20250109T124435" #
    "S2B_MSIL2A_20250110T084229_N0511_R064_T36UYC_20250110T104921" #
    "S3A_OL_1_EFR____20250113T070757_20250113T070953_20250113T090743_0116_121_220_1980_PS1_O_NR_004" #
    "S3A_SR_2_LAN_HY_20250113T070834_20250113T071833_20250113T094018_0599_121_220______PS1_O_NR_005" #
    "S3A_SL_1_RBT____20250113T071253_20250113T071553_20250113T092235_0179_121_220_2340_PS1_O_NR_004" #
    "S3A_SY_2_SYN____20250112T105609_20250112T105802_20250112T191102_0113_121_208_1980_PS1_O_ST_002" #
    "S3B_OL_1_EFR____20250113T081503_20250113T081803_20250113T100456_0179_102_078_2340_PS2_O_NR_004" #
    "S3B_SR_1_SRA_A__20250112T195725_20250112T200725_20250112T220932_0599_102_071______PS2_O_NR_005" #
    "S3B_SL_1_RBT____20250113T080903_20250113T081203_20250113T101516_0179_102_078_1980_PS2_O_NR_004" #
    "S3B_SY_2_SYN____20250112T102213_20250112T102513_20250112T165707_0179_102_065_2340_PS2_O_ST_002" #
    "S5P_NRTI_L2__NO2____20250113T090414_20250113T090914_37582_03_020800_20250113T095726" #
)

# Loop through each product
for PRODUCT in "${PRODUCTS[@]}"
do
    # Construct the output XML file name
    XML_FILE="${PRODUCT}_test.xml"

    # Run the Python script
    echo "Processing $PRODUCT..."
    python3 create_mmd.py -f "$PRODUCT" -y "$YAML_FILE" -m "$XML_FILE"
done